#!/usr/bin/env perl 

use strict;
use warnings;

use Cwd;

BEGIN {
    require Cwd;
    require File::Basename;
    my $lib_dir = Cwd::abs_path(File::Basename::dirname(__FILE__) . '/../lib/');
    unless (grep { $lib_dir eq Cwd::abs_path($_) } @INC) {
        push @INC, $lib_dir;
    }
}

require Defaults;


my $test_cmd = Defaults::BIN_DIR() . "/apipe_tests2";
my $genome_lib = getcwd . '/lib/perl';
my $sys_cmd = "PERL5LIB=$genome_lib:\$PERL5LIB $test_cmd " . join(' ', @ARGV);
print "executing $sys_cmd\n";
my $builds_passed = !system($sys_cmd);

if ( $builds_passed ) {
    print "Passed builds\n";
    exit;
} else {
    print "Failed builds\n";
    exit 1;
}

