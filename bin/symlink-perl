#!/bin/bash

set -o nounset

echo -e "\n=> Symlinking Perl Interpreter..." 1>&2

PERL_VERSION="$1"

[[ -d $WORKSPACE/bin ]] || mkdir $WORKSPACE/bin

[[ -f "genome-perl$PERL_VERSION" ]] && ln -nsf genome-perl$PERL_VERSION $WORKSPACE/bin/genome-perl

case $PERL_VERSION in
    5.8)
        ln -nsf /gsc/bin/perl $WORKSPACE/bin/perl
        ln -nsf /gsc/bin/prove $WORKSPACE/bin/prove
        # TODO ln -nsf $(readlink bin/genome-perl$PERL_VERSION) bin/perl
        ;;
    5.10)
        ln -nsf /usr/bin/perl $WORKSPACE/bin/perl
        ln -nsf /usr/bin/prove $WORKSPACE/bin/prove
        # TODO ln -nsf $(readlink bin/genome-perl$PERL_VERSION) bin/perl
        ;;
    *)
        echo "ERROR: Unrecognized Perl Version: $PERL_VERSION" 1>&2
        exit 2
        ;;
esac
